{% extends "base.html" %}

{% block content %}
 <div class="content-center">
  <p>
    You searched for: <strong>{{ query }}</strong>
  </p>
  <form action="{% url 'search' %}" method="get">
      <input type="text" name="q" placeholder="Search Again"><br>
      <input type="submit" value="Search" class="submitButton">
  </form>
  {% if courses %}
   <table class="table table-striped table-bordered table-hover">
      <tbody>
	<tr>
    <p>
      Found {{ courses|length }} course{{ courses|pluralize }}.
    </p>
      {% for course in datablock %}

	<li>{{course.name}} ({{course.abbrev}})

	   <table class="table table-striped table-bordered table-hover">
	     <thead>
	       <tr>
		<th>Semester</th>
		<th>Number of Students</th>
	       </tr>
	     </thead>
	     <tbody>

            {% for offering in course.offerings %}
		
	       <tr>
		<td><a class="submitButton" href="{% url 'view_students' offering.id %}">{{ offering.semester }}</a></td>
		<td>{{ offering.num_students }} student{{offering.num_students|pluralize}}</td>
	       </tr>
		
	    {% endfor %}

	    </tbody>
	  </table>
      {% endfor %}

  {% else %}
    <p>No courses matched your search criteria.</p>
  {% endif %}

{% endblock %}
</div>
